{% load static tailwind_tags %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      {% block page_title %}

      {% endblock %}
    </title>
    <link rel="icon" href="https://img.icons8.com/fluent/344/worldwide-location.png" type="image/x-icon" />
    <link href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Only keeping necessary custom styles, using Tailwind classes for colors */
      :root {
        --header-height: 4rem;
        --sidebar-width: 240px;
      }
      
      @keyframes slideDown {
        from {
          transform: translateY(-100%);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }
      
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
      
      @keyframes slideUp {
        from {
          transform: translateY(20px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }
      
      .animate-slide-down {
        animation: slideDown 0.5s ease-out;
      }
      
      .animate-fade-in {
        animation: fadeIn 0.5s ease-out;
      }
      
      .animate-slide-up {
        animation: slideUp 0.5s ease-out forwards;
      }
    </style>
  </head>
  <body class="bg-indigo-50 min-h-screen overflow-x-hidden">
    <div class="overlay fixed inset-0 bg-indigo-900/50 z-40 hidden opacity-0 transition-opacity duration-300"></div>

    <header class="fixed w-full bg-white text-indigo-800 z-50 shadow-lg animate-slide-down">
      <div class="max-w-7xl mx-auto px-4 py-2 flex items-center justify-between h-16">
        <button class="mobile-menu-button p-2 lg:hidden"><span class="material-icons-outlined text-2xl">menu</span></button>
        <div class="text-xl font-bold text-blue-900 flex items-center space-x-2">
          <img src="https://img.icons8.com/fluent/344/worldwide-location.png" alt="Logo" class="h-8 w-auto" />
          <span class="text-indigo-800">WebGis</span>
        </div>
        <div class="flex items-center space-x-2">
          {% comment %} <span class="material-icons-outlined p-2 text-2xl cursor-pointer hover:text-indigo-800 transition-transform duration-300 hover:scale-110 hidden md:block">search</span> {% endcomment %}
          {% comment %} <span class="material-icons-outlined p-2 text-2xl cursor-pointer hover:text-indigo-800 transition-transform duration-300 hover:scale-110 hidden md:block">notifications</span> {% endcomment %}
          <img class="w-10 h-10 rounded-full transition-transform duration-300 hover:scale-110 object-cover" src="https://img.icons8.com/fluent/344/test-account.png" alt="Profile" />
        </div>
      </div>
    </header>

    <div class="pt-16 max-w-7xl mx-auto flex">
      <aside class="sidebar fixed lg:static w-[240px] bg-indigo-50 h-[calc(100vh-4rem)] lg:h-auto transform -translate-x-full lg:translate-x-0 transition-transform duration-300 z-40 overflow-y-auto p-4">
        <div class="bg-white rounded-xl shadow-lg mb-6 p-4 transition-all duration-300 hover:-translate-y-1 hover:shadow-xl">
          <a href="{% url 'administrators:index' %}" class="flex items-center text-gray-600 hover:text-indigo-800 py-4 transition-all duration-300 hover:translate-x-1
            {% if request.path == '/' %} text-indigo-800 font-bold {% endif %}">
            <span class="material-icons-outlined mr-2">dashboard</span>
            Utama
            <span class="material-icons-outlined ml-auto">keyboard_arrow_right</span>
          </a>
          <a href="{% url 'administrators:pp' %}" class="flex items-center text-gray-600 hover:text-indigo-800 py-4 transition-all duration-300 hover:translate-x-1
            {% if request.path == '/pp/' %} text-indigo-800 font-bold {% endif %}">
            <span class="material-icons-outlined mr-2">home</span>
            Perumahan & Permukiman
            <span class="material-icons-outlined ml-auto">keyboard_arrow_right</span>
          </a>
          <a href="/" class="flex items-center text-gray-600 hover:text-indigo-800 py-4 transition-all duration-300 hover:translate-x-1">
            <span class="material-icons-outlined mr-2">insert_drive_file</span>
            Survei & GPS
            <span class="material-icons-outlined ml-auto">keyboard_arrow_right</span>
          </a>
          <a href="{% url 'maps:index' %}" class="flex items-center text-gray-600 hover:text-indigo-800 py-4 transition-all duration-300 hover:translate-x-1
            {% if request.path == '/maps/' %} text-indigo-800 font-bold {% endif %}">
            <span class="material-icons-outlined mr-2">map</span>
            Peta
            <span class="material-icons-outlined ml-auto">keyboard_arrow_right</span>
          </a>
        </div>

        <div class="bg-white rounded-xl shadow-lg mb-6 p-4 transition-all duration-300 hover:-translate-y-1 hover:shadow-xl">
          <a href="/" class="flex items-center text-gray-600 hover:text-indigo-800 py-4 transition-all duration-300 hover:translate-x-1">
            <span class="material-icons-outlined mr-2">groups</span>
            Kontribusi Masyarakat
            <span class="material-icons-outlined ml-auto">keyboard_arrow_right</span>
          </a>
          <a href="{% url 'administrators:activity' %}" class="flex items-center text-gray-600 hover:text-indigo-800 py-4 transition-all duration-300 hover:translate-x-1
          {% if request.path == '/activity/' %} text-indigo-800 font-bold {% endif %}">
            <span class="material-icons-outlined mr-2">snowshoeing</span>
            Aktivitas Pengguna
            <span class="material-icons-outlined ml-auto">keyboard_arrow_right</span>
          </a>
        </div>

        <div class="bg-white rounded-xl shadow-lg p-4 transition-all duration-300 hover:-translate-y-1 hover:shadow-xl">
          <a href="/" class="flex items-center text-gray-600 hover:text-indigo-800 py-4 transition-all duration-300 hover:translate-x-1">
            <span class="material-icons-outlined mr-2">face</span>
            Profile
            <span class="material-icons-outlined ml-auto">keyboard_arrow_right</span>
          </a>
          <a href="/" class="flex items-center text-gray-600 hover:text-indigo-800 py-4 transition-all duration-300 hover:translate-x-1">
            <span class="material-icons-outlined mr-2">settings</span>
            Settings
            <span class="material-icons-outlined ml-auto">keyboard_arrow_right</span>
          </a>
          <a href="{% url 'logout' %}" class="flex items-center text-gray-600 hover:text-indigo-800 py-4 transition-all duration-300 hover:translate-x-1">
            <span class="material-icons-outlined mr-2">power_settings_new</span>
            Log out
            <span class="material-icons-outlined ml-auto">keyboard_arrow_right</span>
          </a>
        </div>
      </aside>
      {% block contents %}

      {% endblock %}
    </div>

    <script>
      // Mobile menu functionality
      const mobileMenuButton = document.querySelector('.mobile-menu-button')
      const sidebar = document.querySelector('.sidebar')
      const overlay = document.querySelector('.overlay')
      
      function toggleMobileMenu() {
        sidebar.classList.toggle('translate-x-0')
        overlay.classList.toggle('hidden')
        setTimeout(() => overlay.classList.toggle('opacity-0'), 0)
        document.body.style.overflow = sidebar.classList.contains('translate-x-0') ? 'hidden' : ''
      }
      
      mobileMenuButton.addEventListener('click', toggleMobileMenu)
      overlay.addEventListener('click', toggleMobileMenu)
      
      // Close mobile menu on window resize if open
      window.addEventListener('resize', () => {
        if (window.innerWidth >= 1024 && sidebar.classList.contains('translate-x-0')) {
          toggleMobileMenu()
        }
      })
      
      // Notification animation
      const notificationIcon = document.querySelector('.material-icons-outlined:nth-child(2)')
      setInterval(() => {
        notificationIcon.classList.add('scale-110')
        setTimeout(() => notificationIcon.classList.remove('scale-110'), 200)
      }, 5000)
    </script>
  </body>
</html>
